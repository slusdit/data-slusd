# signinMiddleware

**Location**: `docs\modules\signinMiddleware.md`
**Language**: Unknown
**Lines**: 0

## Overview

**Asset Type:** MARKDOWN
**File Size:** 6.6 KB

**Structure:**
  - line_count: 191
  - headings: {'level': 1, 'text': 'signinMiddleware', 'line': 1}, {'level': 2, 'text': 'Overview', 'line': 7}, {'level': 2, 'text': 'Dependencies', 'line': 11}, {'level': 2, 'text': 'Functions', 'line': 23}, {'level': 3, 'text': '`getRoleFromTitle`', 'line': 25}, {'level': 3, 'text': '`syncUserRolesFromAeries`', 'line': 45}, {'level': 3, 'text': '`updateSchools`', 'line': 66}, {'level': 3, 'text': '`getAllSchools`', 'line': 86}, {'level': 3, 'text': '`updateActiveSchool`', 'line': 105}, {'level': 3, 'text': '`getPrimarySchool`', 'line': 125}
  - code_languages: , typescript

**Content:**
Markdown document with 191 lines, 13 headings.
Structure: signinMiddleware, Overview, Dependencies, Functions, `getRoleFromTitle`, `syncUserRolesFromAeries`, `updateSchools`, `getAllSchools`, `updateActiveSchool`, `getPrimarySchool`

Preview:
# signinMiddleware

**Location**: `lib\signinMiddleware.ts`
**Language**: Typescript
**Lines**: 409

## Overview

Determines the appropriate role based on Aeries job title

## Dependencies

- `next-auth` (Profile)
- `./aeries` (AeriesSimpleStaff, AeriesSimpleTeacher, getAeriesStaff, getTeacherSchoolCredentials, runQuery)
- `./db` (prisma)
- `next/cache` (revalidatePath)
- `next/navigation` (redirect)
- `next/headers` (headers)
- `@/auth` (auth)
- `@prisma/client` (ROLE)


## Functions

### `getR...


## Classes

### `signinMiddleware`

Markdown document with 191 lines, 13 headings.
Structure: signinMiddleware, Overview, Dependencies, Functions, `getRoleFromTitle`, `syncUserRolesFromAeries`, `updateSchools`, `getAllSchools`, `updateActiveSchool`, `getPrimarySchool`

Preview:
# signinMiddleware

**Location**: `lib\signinMiddleware.ts`
**Language**: Typescript
**Lines**: 409

## Overview

Determines the appropriate role based on Aeries job title

## Dependencies

- `next-auth` (Profile)
- `./aeries` (AeriesSimpleStaff, AeriesSimpleTeacher, getAeriesStaff, getTeacherSchoolCredentials, runQuery)
- `./db` (prisma)
- `next/cache` (revalidatePath)
- `next/navigation` (redirect)
- `next/headers` (headers)
- `@/auth` (auth)
- `@prisma/client` (ROLE)


## Functions

### `getR...






---




## Related Modules

- [[ActiveSchool]] - Imports signinMiddleware
- [[AddClassToUserButton]] - Imports signinMiddleware
- [[SchoolPicker]] - Imports signinMiddleware
- [[auth]] - Imports signinMiddleware
- [[ActiveSchool]] - Imports signinMiddleware
- [[AddClassToUserButton]] - Imports signinMiddleware
- [[SchoolPicker]] - Imports signinMiddleware
- [[auth]] - Imports signinMiddleware

---

**Generated by**: doc-agent
**Last Generated**: 2025-12-09T09:26:42.564607